-- Auto Parry Script
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Player = game.Players.LocalPlayer

local parryDistance = 0.55 -- Default distance
local parrySpeed = 10       -- Default speed
local parryCooldown = 1     -- Default cooldown

local Parried = false
local Cooldown = 0

-- Function to update settings dynamically
function SetParryDistance(value)
    parryDistance = value
end

function SetParrySpeed(value)
    parrySpeed = value
end

function SetParryCooldown(value)
    parryCooldown = value
end

-- Dynamic fetching of settings
local function GetParrySettings()
    return parryDistance, parrySpeed, parryCooldown
end

local function GetBall()
    -- Placeholder function to find the ball object
    return workspace:FindFirstChild("Ball") -- Adjust as needed
end

RunService.PreSimulation:Connect(function()
    local Ball, HRP = GetBall(), Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if not Ball or not HRP then
        return
    end
    
    -- Fetch dynamic settings
    local currentParryDistance, currentParrySpeed, currentParryCooldown = GetParrySettings()
    local Speed = Ball.zoomies and Ball.zoomies.VectorVelocity.Magnitude or 0
    local Distance = (HRP.Position - Ball.Position).Magnitude
    
    if Ball:GetAttribute("target") == Player.Name and not Parried and Distance / Speed <= currentParryDistance then
        VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
        Parried = true
        Cooldown = tick()
        
        if (tick() - Cooldown) >= currentParryCooldown then
            Parried = false
        end
    end
end)
